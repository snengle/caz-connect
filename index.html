<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caz Connect</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="professor-caz.png" type="image/png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#16213e">
</head>
<body>
    <div class="main-container">
        <!-- Title is first for all screen sizes -->
        <header class="title-container">
            <div class="title-left">
                <img id="mascot" src="professor-caz.png" alt="Professor Caz Mascot">
                <div class="title-text-group">
                    <h1>Caz Connect</h1>
                    <h2>A Game of Gravity & Connection</h2>
                </div>
            </div>
            <button id="mute-button" aria-label="Mute sound">
                <svg id="volume-on-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13.5 4.06c0-1.34-1.61-2.25-2.83-1.46L5.43 6H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2.43l5.24 3.4c1.22.79 2.83-.12 2.83-1.46V4.06zM18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM20 12c0 2.76-1.74 5.09-4.01 6.04v-12c2.27.95 4.01 3.27 4.01 5.96z"></path></svg>
                <svg id="volume-off-icon" class="hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h3.73L12 18.27v-5.52l4.51 4.51c-.67.43-1.4.76-2.18.98v2.06a8.99 8.99 0 0 0 3.65-1.49L19.73 21 21 19.73l-9-9L4.27 3zM12 4.06L7.22 7.54 12 12.31V4.06z"></path></svg>
            </button>
        </header>

        <!-- Game Area (board and status) -->
        <main class="game-area">
            <div class="board-container">
                <div id="game-board"></div>
                <div id="winning-line"></div>
            </div>
            <div id="status-area">
                <p id="status-text">Player X's Turn</p>
                <div id="score-board">
                    <span class="score-item">Player X: <span id="player-x-score">0</span></span>
                    <span class="score-item">Player O: <span id="player-o-score">0</span></span>
                </div>
            </div>
        </main>

        <!-- Info Area (controls and rules) -->
        <aside class="info-area">
            <div id="game-controls">
                <div class="control-group">
                    <label for="game-mode">Mode:</label>
                    <select id="game-mode">
                        <option value="pvc">Player vs. Computer</option>
                        <option value="pvp">Player vs. Player</option>
                    </select>
                </div>
                <div class="control-group hidden" id="difficulty-selector">
                    <label for="difficulty-level">Difficulty:</label>
                    <select id="difficulty-level">
                        <option value="easy">Easy</option>
                        <option value="medium" selected>Medium</option>
                        <option value="hard">Hard</option>
                        <option value="expert">Expert</option>
                    </select>
                </div>
                <button id="reset-button">New Game</button>
            </div>
            <div id="rules">
                <h3>Instructions</h3>
                <p align="left"><strong>Objective: </strong> Get 4 X's in a row to win!</p>
                <p align="left"><strong>Valid Move: </strong> Pieces must either be directly next to any of the walls or be connected in a straight line to other piece(s) to a wall. Easy difficulty shows you all valid moves.</p>
            </div>
        </aside>
    </div>

    <div id="install-prompt-container" class="hidden">
        <div class="install-prompt-content">
            <div class="install-prompt-text">
                <h3>Install Caz Connect</h3>
                <p>Add to your Home Screen for a full-screen, offline experience!</p>
            </div>
            <div class="install-prompt-buttons">
                <button id="install-button" class="install-accept">Install</button>
                <button id="install-later-button" class="install-decline">Later</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js').then(reg => console.log('Service Worker registered.'))
                .catch(err => console.log('Service Worker registration failed: ', err));
            });
        }
    </script>
</body>
</html>
